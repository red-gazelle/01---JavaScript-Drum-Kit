<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1 class="title">Rock-out!!</h1>
    <div id="page-container">
      <div class="keys">
        <div data-key="65"  class="key A">
          <kbd class="A">A</kbd>
          <span class="sound A">clap</span>
        </div>
        <div data-key="83" class="key S">
          <kbd class="S">S</kbd>
          <span class="sound S">hihat</span>
        </div>
        <div data-key="68" class="key D">
          <kbd class="D">D</kbd>
          <span class="sound D">kick</span>
        </div>
        <div data-key="70" class="key F">
          <kbd class="F">F</kbd>
          <span class="sound F">openhat</span>
        </div>
        <div data-key="71" class="key G">
          <kbd class="G">G</kbd>
          <span class="sound G">boom</span>
        </div>
        <div data-key="72" class="key H">
          <kbd class="H">H</kbd>
          <span class="sound H">ride</span>
        </div>
        <div data-key="74" class="key J">
          <kbd class="J">J</kbd>
          <span class="sound J">snare</span>
        </div>
        <div data-key="75" class="key K">
          <kbd class="K">K</kbd>
          <span class="sound K">tom</span>
        </div>
        <div data-key="76" class="key L">
          <kbd class="L">L</kbd>
          <span class="sound L">tink</span>
        </div>
      </div>
    </div>

  <audio data-key="65" src="sounds/clap.wav"></audio>
  <audio data-key="83" src="sounds/hihat.wav"></audio>
  <audio data-key="68" src="sounds/kick.wav"></audio>
  <audio data-key="70" src="sounds/openhat.wav"></audio>
  <audio data-key="71" src="sounds/boom.wav"></audio>
  <audio data-key="72" src="sounds/ride.wav"></audio>
  <audio data-key="74" src="sounds/snare.wav"></audio>
  <audio data-key="75" src="sounds/tom.wav"></audio>
  <audio data-key="76" src="sounds/tink.wav"></audio>

<script>
    
    function playSound(e){
        console.log(e.target);
        console.log((event.target.matches('.A')));
        
        //console.log;
        
        const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
        const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
        if(!audio) return // stop function 
        //console.log(audio);
        //console.log(key);
        
        audio.currentTime = 0 // rewind to start
        audio.play();// play the sound
        key.classList.add('playing');// add the playing class to the element to animate it
        
        }
    
    function removeTransition(e){
           
        if (e.propertyName !== 'transform') return // skip if it's not a transform
        
        this.classList.remove('playing');
    }
    
    
    function clickSound(e){
        
        let audio, key;
      if (e.target.matches('.A')) {
          
          audio = document.querySelector('audio[data-key="65"]');
          key = document.querySelector('.key[data-key="65"]');
      } else if(e.target.matches('.S')){
          
          audio = document.querySelector('audio[data-key="83"]');
          key = document.querySelector('.key[data-key="83"]');
      }  else if(e.target.matches('.D')){
          
          audio = document.querySelector('audio[data-key="68"]');
          key = document.querySelector('.key[data-key="68"]');
      } else if(e.target.matches('.F')){
          audio = document.querySelector('audio[data-key="70"]');
          key = document.querySelector('.key[data-key="70"]');
          
      } else if(e.target.matches('.G')){
          audio = document.querySelector('audio[data-key="71"]');
          key = document.querySelector('.key[data-key="71"]');
      } else if(e.target.matches('.H')){
          audio = document.querySelector('audio[data-key="72"]');
          key = document.querySelector('.key[data-key="72"]');
      } else if(e.target.matches('.J')){
          audio = document.querySelector('audio[data-key="74"]');
          key = document.querySelector('.key[data-key="74"]');
      } else if(e.target.matches('.K')){
          audio = document.querySelector('audio[data-key="75"]');
          key = document.querySelector('.key[data-key="75"]');
      } else if(e.target.matches('.L')){
          audio = document.querySelector('audio[data-key="76"]');
          key = document.querySelector('.key[data-key="76"]');
      }
      audio.currentTime = 0;
      audio.play();
      key.classList.add('playing');
    }
    
    const keys = document.querySelectorAll('.key');
    
    
    keys.forEach( key => key.addEventListener('transitionend', removeTransition));
    window.addEventListener('keydown', playSound);
    
   //Now I want to make the elements play when clicked
    
    keys.forEach(key=> key.addEventListener('click', clickSound));
    
    
</script>


</body>
</html>
